---
title: 使用Jekyll和Github Pages搭建博客
date: 2015-09-10
tags: [Jekyll, Github Pages]
categories: [教程]
math: true
---

这篇文章介绍如何使用Jekyll和Github Pages搭建一个博客。

## 前言

国际惯例，搭完博客写个文章介绍一下具体搭建流程。其实这东西网上教程多了去了，不过还是写一篇吧，<del>万一有人看呢？</del>

## 安装Ruby

如果想要运行Jekyll，首先要求计算机上安装了Ruby，所以我们第一步显然要装个Ruby。

到<a href="http://rubyinstaller.org/downloads/">Ruby官网</a>上下载最新的Ruby安装包，因为我暂时没有Mac和Linux系统的机器，所以我下载了个Windows版本的安装文件，各位根据自己使用的系统来下载对应的文件。

下载完了安装，记得安装的时候把<strong>"Add Ruby executables to your PATH"</strong>勾上，这样你就不需要配置环境变量了，所谓能懒则懒。

装好Ruby，最好再装一个Ruby DevKit，还是到<a href="http://rubyinstaller.org/downloads/">Ruby官网</a>，不过这次下载的是Development Kit了，注意选择跟你刚才下载的Ruby版本对应的文件。

这个DevKit其实是个7-Zip自解压文件，解压到你喜欢的位置（最好选个根目录，因为等会要用命令行安装，一直cd选目录毕竟麻烦）。

解压完了之后，打开命令行工具（CMD、PowerShell什么的），cd到刚才解压的目录，然后执行下面的命令：

```
ruby dk.rb init
ruby dk.rb install
```

OK! Ruby安装完成，下面安装Jekyll。

## 安装Jekyll

安装Jekyll相当简单，装完Ruby之后，如果你安装没问题，环境变量没问题，那么直接命令行里写：

```
gem install jekyll
```

就能完成安装。

对了，国内还需要更换安装源，在命令行里执行如下命令：

```
gem sources --remove https://rubygems.org/
gem sources -a https://ruby.taobao.org/
gem sources -l
```

这样就你就把安装源更换成了淘宝的安装源，速度飞起。

2016-07-06：https://ruby.taobao.org/ 最近出现了无法添加到安装源的问题，可以尝试使用中山大学的安装源：http://mirror.sysu.edu.cn/rubygems/

接下来是可选部分。

## 安装代码高亮插件

现在Github支持Rouge，安装方式非常简单，直接输入如下命令：

```
gem install rouge
```

然后在_config.yml里写上

```
highlighter: rouge
```

这样你就能在你的博客里使用代码高亮插件Rouge了，关于rouge怎么用，请看[这里](http://koschicken.github.io/2016-05-16/rouge/)。

## 搭建博客

走到这一步，你本地的Jekyll环境已经搭建完成。

现在我们用Jekyll来搭建一个。

先在某个盘建个文件夹，名字随便起，比如blog，后面我就用blog作为示例。

然后cd到blog，执行如下命令：

```
jekyll new xxx
```

xxx是你自己随便起的名字，显然要用英文，后面我以xxx为示例。

执行完了之后blog下面就出现了一个xxx文件夹，点开里面的结构如图：

![jekyll1][jekyll1]

然后cd到这个xxx文件夹，输入如下命令打开服务器：

```
jekyll serve
```

假如你的_config.yml里配置了代码高亮，要确保启动服务器之前，插件已经正确安装。

服务器启动正常应该如图所示：

![startup][startup]

成功启动服务器之后，到浏览器里访问http://localhost:4000/，如果一切顺利，你会看到这样的页面：

![jekyllblog][jekyllblog]

至此，博客搭建完成，样式什么的就由你自己写了。

## 文件目录简介

最后简单讲解一下各个文件夹的作用。

_include文件夹下面放的文件都是所有页面都能用的文件，可以认为是default.html这个模板页的组件。

_include文件夹里有3个html文件，footer.html是页面底端的内容，head.html里面是最后生成的页面中的<head></head>，header.html是页面顶端的内容。

这三个文件会被_layouts文件夹中的default.html合并到一起。

_layouts文件夹下面的文件控制不同类型页面的样式。

_posts存放的是你的博客文章，记得要用markdown写。

如果这个博客被生成过，会有一个_site文件夹，这个文件夹不用管，放的是生成出来的页面。

还会看到一个_sass文件夹，这个文件夹放的是sass样式文件。这是自动生成的，如果自定义样式且不用sass的话，这个文件夹可以删除。

同理有一个_sass-cache，也可以删除。

其他非_开头的文件夹可以认为是资源文件夹，可以自己创建，在配置文件里定义一下就能被网站引用到。

_config.yml是配置文件，最重要的文件，所有网站配置都在这里写。

feed.xml是rss订阅用的，不需要修改。

about.md是页面右上角那个About按钮用的页面，可以自己写内容，甚至可以不要这个文件。

最后还有个index.html，这里是网站首页，修改样式的话也需要做修改。

## 后记

安装过程参考了<a href="http://jekyll-windows.juthilo.com/">Run Jekyll on Windows</a>，这篇文章基本就是按照这个写的。

本文只介绍了在本地跑Jekyll，如果要上传到github的话，用个Github Pages托管就能供所有人访问了。具体请看<a href="https://pages.github.com/">Github Pages</a>。

如果想用评论功能，用多说、搜狐畅言或者Disqus都可以，具体怎么做可以参考他们的官方网站。<del>我也有可能会写个文章介绍一下。</del>

可以绑定自己的域名，我没有域名，所以没研究。

<del>下一篇博客简单介绍一下怎么用markdown写文章。</del>

[jekyll1]:	{{"/20150910/jekyll1.jpg" | prepend: site.imgrepo }}
[startup]:	{{"/20150910/startup.jpg" | prepend: site.imgrepo }}
[jekyllblog]:	{{"/20150910/jekyllblog.jpg" | prepend: site.imgrepo }}
